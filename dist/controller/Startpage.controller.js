sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","ui5/fitnessApp/actions/startPageActions","ui5/fitnessApp/actions/commonActions","ui5/fitnessApp/selectors/commonSelectors","ui5/fitnessApp/features/entitySlice","sap/m/table/columnmenu/Menu","sap/m/table/columnmenu/QuickSort","sap/m/table/columnmenu/QuickSortItem","sap/m/Menu","sap/m/MenuItem","sap/m/Column","sap/m/Text"],(e,t,n,o,s,i,r,a,u,l,c,m,h)=>{"use strict";return e.extend("ui5.fitnessApp.controller.Startpage",{onInit:function(){this.oStartPageActions=new n;this.oCommonActions=new o;this.createSurnameSort()},createSurnameSort:function(){const e=this.getView().byId("players_table");const t=e.getColumns();const n=t[1];n.setHeaderMenu(new r({quickActions:[new a({items:new u({key:"Surname",label:"Surname"}),change:this.onSort.bind(this)})]}))},onAthletePress:function(e){document.activeElement.blur();let t=e.getSource().getBindingContext("athleteModel");let n=t.getProperty("_id");let o="athleteDetails";let s={athletePath:window.encodeURIComponent(t.getPath().substring(1))};const i=this.oView.sViewName.split(".").at(-1);const r=this.oCommonActions.navigateTo({sView:"AthleteDetails",sOldView:i,sTargetRoute:o,sRouteParameters:s,nAthleteId:n});this.getOwnerComponent().reduxStore.dispatch(r)},onSelectTab:function(e){let t="home";const n=e.getParameter("key");switch(n){case"Startpage":t="home";break;case"Profile":t="profile";break}const o=this.oView.sViewName.split(".").at(-1);const s=this.oCommonActions.navigateTo({sView:n,sOldView:o,sTargetRoute:t,nAthleteId:null});this.getOwnerComponent().reduxStore.dispatch(s)},onSort:function(e){let t=e.getParameter("item").getSortOrder();if(t==="Ascending"){t="ASC"}else if(t==="Descending"){t="DESC"}else{t=""}const n=this.oCommonActions.sortTable({sOrder:t,sAttribute:["surname"],sEntityName:"athletes"});this.getOwnerComponent().reduxStore.dispatch(n)},onSearch:function(e){let t=e.getSource().getValue();const n=this.oCommonActions.searchBySurname({sQuery:t,sAttribute:["surname"],sEntityName:"athletes"});this.getOwnerComponent().reduxStore.dispatch(n)},onRefresh:function(){const e=this.oCommonActions.refreshTable({sOrder:"",sAttribute:[""],sEntityName:"athletes"});this.getOwnerComponent().reduxStore.dispatch(e)},onOpenInsertDialog:function(){this.getView().byId("idInsertDialog").open()},onCloseInsertDialog:function(e){e.getSource().getParent().close()},onInsertRow:function(e){const t=s.selectUniqueAthleteId(this.getOwnerComponent().reduxStore.getState());const n={_id:t,name:this.getView().byId("nameInput").getValue(),surname:this.getView().byId("surnameInput").getValue(),position:this.getView().byId("positionInput").getValue(),age:this.getView().byId("ageInput").getValue(),gender:this.getView().byId("genderInput").getValue()};const o=this.oCommonActions.insertAthlete({oAthlete:n});this.getOwnerComponent().reduxStore.dispatch(o);this.getView().byId("nameInput").setValue(""),this.getView().byId("surnameInput").setValue(""),this.getView().byId("positionInput").setValue(""),this.getView().byId("ageInput").setValue(""),this.getView().byId("genderInput").setValue("");e.getSource().getParent().close()},toggleDeleteRow:function(e){const t=this.getView().byId("players_table");if(e.getSource().getPressed()){this.oSelectColumn=new m({header:new h({text:"Select"})});t.addColumn(this.oSelectColumn)}else{t.removeColumn(t.getColumns().length-1)}},onDeleteRow:function(e){let t=e.getSource().getBindingContext("athleteModel");let n=t.getProperty("_id");const o=this.oCommonActions.deleteAthlete({sAthleteId:n});this.getOwnerComponent().reduxStore.dispatch(o)},onFetchFromServer:function(e){t.show("Fetching data");this.getOwnerComponent().reduxStore.dispatch(i.fetchAthletes)}})});
//# sourceMappingURL=Startpage.controller.js.map