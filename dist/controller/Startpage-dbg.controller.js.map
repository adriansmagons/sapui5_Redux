{"version":3,"names":["sap","ui","define","Controller","MessageToast","startPageActions","commonActions","commonSelectors","entitySlice","ColumnMenu","QuickSort","QuickSortItem","Menu","MenuItem","Column","Text","extend","onInit","oStartPageActions","oCommonActions","createSurnameSort","oTable","getView","byId","aColumns","getColumns","oSurnameColumn","setHeaderMenu","quickActions","items","key","label","change","onSort","bind","onAthletePress","oEvent","document","activeElement","blur","oContext","getSource","getBindingContext","nAthleteId","getProperty","sTargetRoute","sRouteParameters","athletePath","window","encodeURIComponent","getPath","substring","sCurrentView","oView","sViewName","split","at","oNavigateAction","navigateTo","sView","sOldView","getOwnerComponent","reduxStore","dispatch","onSelectTab","sKey","getParameter","sSortOrder","getSortOrder","oSortTableAction","sortTable","sOrder","sAttribute","sEntityName","onSearch","sQuery","getValue","oSearchAction","searchBySurname","onRefresh","oRefreshAction","refreshTable","onOpenInsertDialog","open","onCloseInsertDialog","getParent","close","onInsertRow","sNewId","selectUniqueAthleteId","getState","oAthlete","_id","name","surname","position","age","gender","oInsertAthleteAction","insertAthlete","setValue","toggleDeleteRow","getPressed","oSelectColumn","header","text","addColumn","removeColumn","length","onDeleteRow","sAthleteId","oDeleteAthleteAction","deleteAthlete","onFetchFromServer","show","fetchAthletes"],"sources":["Startpage.controller.js"],"sourcesContent":["\r\nsap.ui.define([\r\n    \"sap/ui/core/mvc/Controller\",\r\n    'sap/m/MessageToast',\r\n    \"ui5/fitnessApp/actions/startPageActions\",\r\n    \"ui5/fitnessApp/actions/commonActions\",\r\n    \"ui5/fitnessApp/selectors/commonSelectors\",\r\n    \"ui5/fitnessApp/features/entitySlice\",\r\n    \"sap/m/table/columnmenu/Menu\",\r\n    \"sap/m/table/columnmenu/QuickSort\",\r\n    \"sap/m/table/columnmenu/QuickSortItem\",\r\n    \"sap/m/Menu\",\r\n    \"sap/m/MenuItem\",\r\n    \"sap/m/Column\",\r\n\t\"sap/m/Text\",\r\n ], (Controller, MessageToast, startPageActions, commonActions, commonSelectors, entitySlice, ColumnMenu, QuickSort, QuickSortItem, Menu, MenuItem, Column, Text) => {\r\n    \"use strict\";\r\n \r\n    return Controller.extend(\"ui5.fitnessApp.controller.Startpage\", {\r\n    \r\n        onInit: function () {\r\n            this.oStartPageActions = new startPageActions();\r\n            this.oCommonActions = new commonActions();\r\n            this.createSurnameSort();\r\n        },\r\n\r\n        createSurnameSort: function(){\r\n            const oTable = this.getView().byId(\"players_table\");  \r\n\t\t\tconst aColumns = oTable.getColumns();\r\n            const oSurnameColumn = aColumns[1];\r\n\r\n            oSurnameColumn.setHeaderMenu(new ColumnMenu({\r\n\t\t\t\tquickActions: [\r\n\t\t\t\t\tnew QuickSort({\r\n\t\t\t\t\t\titems: new QuickSortItem({\r\n\t\t\t\t\t\t\tkey: \"Surname\",\r\n\t\t\t\t\t\t\tlabel: \"Surname\"\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tchange: this.onSort.bind(this)\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t}));\r\n        },\r\n\r\n        onAthletePress: function (oEvent) {  \r\n            document.activeElement.blur();\r\n\r\n            let oContext = oEvent.getSource().getBindingContext(\"athleteModel\");\r\n            let nAthleteId = oContext.getProperty(\"_id\");  \r\n            let sTargetRoute = \"athleteDetails\";\r\n            let sRouteParameters = {athletePath: window.encodeURIComponent(oContext.getPath().substring(1))};\r\n\r\n            const sCurrentView = this.oView.sViewName.split('.').at(-1)\r\n            const oNavigateAction = this.oCommonActions.navigateTo({sView: \"AthleteDetails\", sOldView: sCurrentView, sTargetRoute: sTargetRoute, sRouteParameters: sRouteParameters, nAthleteId: nAthleteId});\r\n            this.getOwnerComponent().reduxStore.dispatch(oNavigateAction);\r\n        },\r\n\r\n        onSelectTab: function(oEvent){\r\n            let sTargetRoute = \"home\";\r\n            const sKey = oEvent.getParameter(\"key\");\r\n\r\n            switch(sKey){\r\n                case \"Startpage\":\r\n                    sTargetRoute = \"home\";\r\n                    break;\r\n                case \"Profile\":\r\n                    sTargetRoute = \"profile\";\r\n                    break;\r\n            }\r\n\r\n            const sCurrentView = this.oView.sViewName.split('.').at(-1)\r\n            const oNavigateAction = this.oCommonActions.navigateTo({sView: sKey, sOldView: sCurrentView, sTargetRoute: sTargetRoute, nAthleteId: null});\r\n            this.getOwnerComponent().reduxStore.dispatch(oNavigateAction);\r\n        },\r\n\r\n        onSort: function(oEvent){\r\n            let sSortOrder = oEvent.getParameter(\"item\").getSortOrder();\r\n            if(sSortOrder === \"Ascending\"){\r\n                sSortOrder = \"ASC\"\r\n            }else if(sSortOrder === \"Descending\"){\r\n                sSortOrder = \"DESC\"\r\n            }else{\r\n                sSortOrder = \"\"\r\n            }\r\n            const oSortTableAction = this.oCommonActions.sortTable({sOrder: sSortOrder, sAttribute: [\"surname\"], sEntityName: \"athletes\"});\r\n            this.getOwnerComponent().reduxStore.dispatch(oSortTableAction);\r\n        },\r\n        onSearch: function(oEvent){\r\n            let sQuery = oEvent.getSource().getValue();\r\n            const oSearchAction = this.oCommonActions.searchBySurname({sQuery: sQuery, sAttribute: [\"surname\"], sEntityName: \"athletes\"});\r\n            this.getOwnerComponent().reduxStore.dispatch(oSearchAction);\r\n        },\r\n        \r\n        onRefresh: function(){\r\n            const oRefreshAction = this.oCommonActions.refreshTable({sOrder: \"\", sAttribute: [\"\"], sEntityName: \"athletes\"});\r\n            this.getOwnerComponent().reduxStore.dispatch(oRefreshAction);\r\n        },\r\n\r\n        onOpenInsertDialog: function(){\r\n            this.getView().byId(\"idInsertDialog\").open();\r\n        },\r\n        onCloseInsertDialog: function(oEvent){\r\n            oEvent.getSource().getParent().close();\r\n        },\r\n        onInsertRow: function(oEvent){\r\n            const sNewId = commonSelectors.selectUniqueAthleteId(this.getOwnerComponent().reduxStore.getState());  // selects unique id from athlete list\r\n            const oAthlete = {\r\n                    _id: sNewId,\r\n                    name: this.getView().byId(\"nameInput\").getValue(),\r\n                    surname: this.getView().byId(\"surnameInput\").getValue(),\r\n                    position: this.getView().byId(\"positionInput\").getValue(),\r\n                    age: this.getView().byId(\"ageInput\").getValue(),\r\n                    gender: this.getView().byId(\"genderInput\").getValue()}\r\n\r\n            const oInsertAthleteAction = this.oCommonActions.insertAthlete({oAthlete:oAthlete});\r\n            this.getOwnerComponent().reduxStore.dispatch(oInsertAthleteAction);\r\n\r\n            this.getView().byId(\"nameInput\").setValue(\"\"),\r\n            this.getView().byId(\"surnameInput\").setValue(\"\"),\r\n            this.getView().byId(\"positionInput\").setValue(\"\"),\r\n            this.getView().byId(\"ageInput\").setValue(\"\"),\r\n            this.getView().byId(\"genderInput\").setValue(\"\")\r\n            oEvent.getSource().getParent().close();\r\n        },\r\n        toggleDeleteRow: function(oEvent){\r\n            const oTable = this.getView().byId(\"players_table\");\r\n\r\n\t\t\tif(oEvent.getSource().getPressed()){\r\n\t\t\t\tthis.oSelectColumn = new Column({\r\n\t\t\t\t\theader: new Text ({text: \"Select\"})\r\n\t\t\t\t});\r\n\t\t\t\toTable.addColumn(this.oSelectColumn);\r\n\t\t\t}else{\r\n\t\t\t\toTable.removeColumn(oTable.getColumns().length - 1);\r\n\t\t\t}\r\n        },\r\n        onDeleteRow: function(oEvent){\r\n            let oContext = oEvent.getSource().getBindingContext(\"athleteModel\");\r\n\t\t\tlet sAthleteId = oContext.getProperty(\"_id\");\r\n            const oDeleteAthleteAction = this.oCommonActions.deleteAthlete({sAthleteId: sAthleteId});\r\n            this.getOwnerComponent().reduxStore.dispatch(oDeleteAthleteAction);\r\n        },\r\n\r\n        onFetchFromServer: function(oEvent){\r\n            MessageToast.show(\"Fetching data\");\r\n            this.getOwnerComponent().reduxStore.dispatch(entitySlice.fetchAthletes);\r\n        },\r\n    });\r\n });"],"mappings":"AACAA,GAAG,CAACC,EAAE,CAACC,MAAM,CAAC,CACV,4BAA4B,EAC5B,oBAAoB,EACpB,yCAAyC,EACzC,sCAAsC,EACtC,0CAA0C,EAC1C,qCAAqC,EACrC,6BAA6B,EAC7B,kCAAkC,EAClC,sCAAsC,EACtC,YAAY,EACZ,gBAAgB,EAChB,cAAc,EACjB,YAAY,CACX,EAAE,CAACC,UAAU,EAAEC,YAAY,EAAEC,gBAAgB,EAAEC,aAAa,EAAEC,eAAe,EAAEC,WAAW,EAAEC,UAAU,EAAEC,SAAS,EAAEC,aAAa,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,IAAI,KAAK;EACjK,YAAY;;EAEZ,OAAOZ,UAAU,CAACa,MAAM,CAAC,qCAAqC,EAAE;IAE5DC,MAAM,EAAE,SAAAA,CAAA,EAAY;MAChB,IAAI,CAACC,iBAAiB,GAAG,IAAIb,gBAAgB,CAAC,CAAC;MAC/C,IAAI,CAACc,cAAc,GAAG,IAAIb,aAAa,CAAC,CAAC;MACzC,IAAI,CAACc,iBAAiB,CAAC,CAAC;IAC5B,CAAC;IAEDA,iBAAiB,EAAE,SAAAA,CAAA,EAAU;MACzB,MAAMC,MAAM,GAAG,IAAI,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,eAAe,CAAC;MAC5D,MAAMC,QAAQ,GAAGH,MAAM,CAACI,UAAU,CAAC,CAAC;MAC3B,MAAMC,cAAc,GAAGF,QAAQ,CAAC,CAAC,CAAC;MAElCE,cAAc,CAACC,aAAa,CAAC,IAAIlB,UAAU,CAAC;QACpDmB,YAAY,EAAE,CACb,IAAIlB,SAAS,CAAC;UACbmB,KAAK,EAAE,IAAIlB,aAAa,CAAC;YACxBmB,GAAG,EAAE,SAAS;YACdC,KAAK,EAAE;UACR,CAAC,CAAC;UACFC,MAAM,EAAE,IAAI,CAACC,MAAM,CAACC,IAAI,CAAC,IAAI;QAC9B,CAAC,CAAC;MAEJ,CAAC,CAAC,CAAC;IACE,CAAC;IAEDC,cAAc,EAAE,SAAAA,CAAUC,MAAM,EAAE;MAC9BC,QAAQ,CAACC,aAAa,CAACC,IAAI,CAAC,CAAC;MAE7B,IAAIC,QAAQ,GAAGJ,MAAM,CAACK,SAAS,CAAC,CAAC,CAACC,iBAAiB,CAAC,cAAc,CAAC;MACnE,IAAIC,UAAU,GAAGH,QAAQ,CAACI,WAAW,CAAC,KAAK,CAAC;MAC5C,IAAIC,YAAY,GAAG,gBAAgB;MACnC,IAAIC,gBAAgB,GAAG;QAACC,WAAW,EAAEC,MAAM,CAACC,kBAAkB,CAACT,QAAQ,CAACU,OAAO,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC,CAAC;MAAC,CAAC;MAEhG,MAAMC,YAAY,GAAG,IAAI,CAACC,KAAK,CAACC,SAAS,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,EAAE,CAAC,CAAC,CAAC,CAAC;MAC3D,MAAMC,eAAe,GAAG,IAAI,CAACtC,cAAc,CAACuC,UAAU,CAAC;QAACC,KAAK,EAAE,gBAAgB;QAAEC,QAAQ,EAAER,YAAY;QAAEP,YAAY,EAAEA,YAAY;QAAEC,gBAAgB,EAAEA,gBAAgB;QAAEH,UAAU,EAAEA;MAAU,CAAC,CAAC;MACjM,IAAI,CAACkB,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAACC,QAAQ,CAACN,eAAe,CAAC;IACjE,CAAC;IAEDO,WAAW,EAAE,SAAAA,CAAS5B,MAAM,EAAC;MACzB,IAAIS,YAAY,GAAG,MAAM;MACzB,MAAMoB,IAAI,GAAG7B,MAAM,CAAC8B,YAAY,CAAC,KAAK,CAAC;MAEvC,QAAOD,IAAI;QACP,KAAK,WAAW;UACZpB,YAAY,GAAG,MAAM;UACrB;QACJ,KAAK,SAAS;UACVA,YAAY,GAAG,SAAS;UACxB;MACR;MAEA,MAAMO,YAAY,GAAG,IAAI,CAACC,KAAK,CAACC,SAAS,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,EAAE,CAAC,CAAC,CAAC,CAAC;MAC3D,MAAMC,eAAe,GAAG,IAAI,CAACtC,cAAc,CAACuC,UAAU,CAAC;QAACC,KAAK,EAAEM,IAAI;QAAEL,QAAQ,EAAER,YAAY;QAAEP,YAAY,EAAEA,YAAY;QAAEF,UAAU,EAAE;MAAI,CAAC,CAAC;MAC3I,IAAI,CAACkB,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAACC,QAAQ,CAACN,eAAe,CAAC;IACjE,CAAC;IAEDxB,MAAM,EAAE,SAAAA,CAASG,MAAM,EAAC;MACpB,IAAI+B,UAAU,GAAG/B,MAAM,CAAC8B,YAAY,CAAC,MAAM,CAAC,CAACE,YAAY,CAAC,CAAC;MAC3D,IAAGD,UAAU,KAAK,WAAW,EAAC;QAC1BA,UAAU,GAAG,KAAK;MACtB,CAAC,MAAK,IAAGA,UAAU,KAAK,YAAY,EAAC;QACjCA,UAAU,GAAG,MAAM;MACvB,CAAC,MAAI;QACDA,UAAU,GAAG,EAAE;MACnB;MACA,MAAME,gBAAgB,GAAG,IAAI,CAAClD,cAAc,CAACmD,SAAS,CAAC;QAACC,MAAM,EAAEJ,UAAU;QAAEK,UAAU,EAAE,CAAC,SAAS,CAAC;QAAEC,WAAW,EAAE;MAAU,CAAC,CAAC;MAC9H,IAAI,CAACZ,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAACC,QAAQ,CAACM,gBAAgB,CAAC;IAClE,CAAC;IACDK,QAAQ,EAAE,SAAAA,CAAStC,MAAM,EAAC;MACtB,IAAIuC,MAAM,GAAGvC,MAAM,CAACK,SAAS,CAAC,CAAC,CAACmC,QAAQ,CAAC,CAAC;MAC1C,MAAMC,aAAa,GAAG,IAAI,CAAC1D,cAAc,CAAC2D,eAAe,CAAC;QAACH,MAAM,EAAEA,MAAM;QAAEH,UAAU,EAAE,CAAC,SAAS,CAAC;QAAEC,WAAW,EAAE;MAAU,CAAC,CAAC;MAC7H,IAAI,CAACZ,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAACC,QAAQ,CAACc,aAAa,CAAC;IAC/D,CAAC;IAEDE,SAAS,EAAE,SAAAA,CAAA,EAAU;MACjB,MAAMC,cAAc,GAAG,IAAI,CAAC7D,cAAc,CAAC8D,YAAY,CAAC;QAACV,MAAM,EAAE,EAAE;QAAEC,UAAU,EAAE,CAAC,EAAE,CAAC;QAAEC,WAAW,EAAE;MAAU,CAAC,CAAC;MAChH,IAAI,CAACZ,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAACC,QAAQ,CAACiB,cAAc,CAAC;IAChE,CAAC;IAEDE,kBAAkB,EAAE,SAAAA,CAAA,EAAU;MAC1B,IAAI,CAAC5D,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,gBAAgB,CAAC,CAAC4D,IAAI,CAAC,CAAC;IAChD,CAAC;IACDC,mBAAmB,EAAE,SAAAA,CAAShD,MAAM,EAAC;MACjCA,MAAM,CAACK,SAAS,CAAC,CAAC,CAAC4C,SAAS,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IAC1C,CAAC;IACDC,WAAW,EAAE,SAAAA,CAASnD,MAAM,EAAC;MACzB,MAAMoD,MAAM,GAAGjF,eAAe,CAACkF,qBAAqB,CAAC,IAAI,CAAC5B,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAAC4B,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;MACvG,MAAMC,QAAQ,GAAG;QACTC,GAAG,EAAEJ,MAAM;QACXK,IAAI,EAAE,IAAI,CAACvE,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,WAAW,CAAC,CAACqD,QAAQ,CAAC,CAAC;QACjDkB,OAAO,EAAE,IAAI,CAACxE,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,cAAc,CAAC,CAACqD,QAAQ,CAAC,CAAC;QACvDmB,QAAQ,EAAE,IAAI,CAACzE,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,eAAe,CAAC,CAACqD,QAAQ,CAAC,CAAC;QACzDoB,GAAG,EAAE,IAAI,CAAC1E,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC,CAACqD,QAAQ,CAAC,CAAC;QAC/CqB,MAAM,EAAE,IAAI,CAAC3E,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,aAAa,CAAC,CAACqD,QAAQ,CAAC;MAAC,CAAC;MAE9D,MAAMsB,oBAAoB,GAAG,IAAI,CAAC/E,cAAc,CAACgF,aAAa,CAAC;QAACR,QAAQ,EAACA;MAAQ,CAAC,CAAC;MACnF,IAAI,CAAC9B,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAACC,QAAQ,CAACmC,oBAAoB,CAAC;MAElE,IAAI,CAAC5E,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,WAAW,CAAC,CAAC6E,QAAQ,CAAC,EAAE,CAAC,EAC7C,IAAI,CAAC9E,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,cAAc,CAAC,CAAC6E,QAAQ,CAAC,EAAE,CAAC,EAChD,IAAI,CAAC9E,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,eAAe,CAAC,CAAC6E,QAAQ,CAAC,EAAE,CAAC,EACjD,IAAI,CAAC9E,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC,CAAC6E,QAAQ,CAAC,EAAE,CAAC,EAC5C,IAAI,CAAC9E,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,aAAa,CAAC,CAAC6E,QAAQ,CAAC,EAAE,CAAC;MAC/ChE,MAAM,CAACK,SAAS,CAAC,CAAC,CAAC4C,SAAS,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IAC1C,CAAC;IACDe,eAAe,EAAE,SAAAA,CAASjE,MAAM,EAAC;MAC7B,MAAMf,MAAM,GAAG,IAAI,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,eAAe,CAAC;MAE5D,IAAGa,MAAM,CAACK,SAAS,CAAC,CAAC,CAAC6D,UAAU,CAAC,CAAC,EAAC;QAClC,IAAI,CAACC,aAAa,GAAG,IAAIzF,MAAM,CAAC;UAC/B0F,MAAM,EAAE,IAAIzF,IAAI,CAAE;YAAC0F,IAAI,EAAE;UAAQ,CAAC;QACnC,CAAC,CAAC;QACFpF,MAAM,CAACqF,SAAS,CAAC,IAAI,CAACH,aAAa,CAAC;MACrC,CAAC,MAAI;QACJlF,MAAM,CAACsF,YAAY,CAACtF,MAAM,CAACI,UAAU,CAAC,CAAC,CAACmF,MAAM,GAAG,CAAC,CAAC;MACpD;IACK,CAAC;IACDC,WAAW,EAAE,SAAAA,CAASzE,MAAM,EAAC;MACzB,IAAII,QAAQ,GAAGJ,MAAM,CAACK,SAAS,CAAC,CAAC,CAACC,iBAAiB,CAAC,cAAc,CAAC;MAC5E,IAAIoE,UAAU,GAAGtE,QAAQ,CAACI,WAAW,CAAC,KAAK,CAAC;MACnC,MAAMmE,oBAAoB,GAAG,IAAI,CAAC5F,cAAc,CAAC6F,aAAa,CAAC;QAACF,UAAU,EAAEA;MAAU,CAAC,CAAC;MACxF,IAAI,CAACjD,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAACC,QAAQ,CAACgD,oBAAoB,CAAC;IACtE,CAAC;IAEDE,iBAAiB,EAAE,SAAAA,CAAS7E,MAAM,EAAC;MAC/BhC,YAAY,CAAC8G,IAAI,CAAC,eAAe,CAAC;MAClC,IAAI,CAACrD,iBAAiB,CAAC,CAAC,CAACC,UAAU,CAACC,QAAQ,CAACvD,WAAW,CAAC2G,aAAa,CAAC;IAC3E;EACJ,CAAC,CAAC;AACL,CAAC,CAAC","ignoreList":[],"file":"Startpage-dbg.controller.js"}